<view class="reading-container ink-paper">
  

  <!-- ä¸»è¦å†…å®¹æ»šåŠ¨åŒºåŸŸ -->
  <scroll-view 
    class="content-scroll"
    scroll-y="{{true}}"
    scroll-top="{{scrollTop}}"
    scroll-with-animation="{{true}}"
    bindscroll="onScroll"
    enhanced="{{true}}"
    show-scrollbar="{{false}}"
  >
    <!-- ç« èŠ‚åˆ—è¡¨ -->
    <view class="chapters-container">
      <block wx:for="{{visibleChapters}}" wx:key="id">
        <view 
          class="chapter-item content-container" 
          id="chapter-{{item.id}}"
          data-chapter-id="{{item.id}}"
        >
          <!-- ç« èŠ‚æ ‡é¢˜ -->
          <view class="chapter-header">
            <view class="chapter-number">ç¬¬ {{item.id}} ç« </view>
            <view class="chapter-title ink-title">{{item.title}}</view>
            <view class="ink-divider"></view>
          </view>
          
          <!-- ç« èŠ‚å†…å®¹ -->
          <view class="chapter-content">
            <view class="chapter-text ink-text {{useCalligraphyStyle ? 'calligraphy-style' : ''}}">
              <block wx:for="{{item.paragraphs}}" wx:key="index" wx:for-item="paragraph">
                <view class="paragraph">{{paragraph}}</view>
              </block>
            </view>
          </view>
          
          <!-- ç« èŠ‚åˆ†éš” -->
          <view class="chapter-separator" wx:if="{{index < visibleChapters.length - 1}}">
            <view class="separator-decoration">
              <view class="separator-dot"></view>
              <view class="separator-dot"></view>
              <view class="separator-dot"></view>
            </view>
          </view>
        </view>
      </block>
    </view>
    
    <!-- åŠ è½½æ›´å¤šæŒ‡ç¤ºå™¨ -->
    <view class="loading-more" wx:if="{{hasMore}}">
      <view class="loading-text">åŠ è½½æ›´å¤šç« èŠ‚...</view>
    </view>
    
    <!-- ç»“æŸæŒ‡ç¤ºå™¨ -->
    <view class="reading-end" wx:if="{{!hasMore}}">
      <view class="end-decoration">
        <view class="end-text">å…¨æ–‡å®Œ</view>
        <view class="end-seal">ğŸ®</view>
      </view>
    </view>
  </scroll-view>
  
  <!-- æµ®åŠ¨å¯¼èˆªæŒ‰é’® -->
  <view class="floating-nav">
    <!-- ä¸Šä¸€ç« æŒ‰é’® -->
    <view 
      class="nav-button nav-prev {{currentChapterIndex <= 0 ? 'disabled' : ''}}"
      bindtap="gotoPrevChapter"
    >
      <view class="nav-icon">â¬†</view>
      <view class="nav-text">ä¸Šä¸€ç« </view>
    </view>
    
    <!-- å½“å‰ç« èŠ‚æŒ‡ç¤ºå™¨ -->
    <view class="chapter-indicator" bindtap="showChapterList">
      <view class="indicator-text">{{currentChapterIndex + 1}}/{{totalChapters}}</view>
    </view>
    
    <!-- ä¸‹ä¸€ç« æŒ‰é’® -->
    <view 
      class="nav-button nav-next {{currentChapterIndex >= totalChapters - 1 ? 'disabled' : ''}}"
      bindtap="gotoNextChapter"
    >
      <view class="nav-icon">â¬‡</view>
      <view class="nav-text">ä¸‹ä¸€ç« </view>
    </view>
  </view>
  
  <!-- ç« èŠ‚é€‰æ‹©å¼¹çª— -->
  <view class="chapter-popup {{showChapterPopup ? 'show' : ''}}" bindtap="hideChapterList">
    <view class="popup-content" catchtap="stopPropagation">
      <view class="popup-header">
        <view class="popup-title">ç« èŠ‚ç›®å½•</view>
        <view class="popup-close" bindtap="hideChapterList">âœ•</view>
      </view>
      <scroll-view class="popup-list" scroll-y="{{true}}">
        <view 
          class="popup-item {{item.id === currentChapterIndex + 1 ? 'active' : ''}}"
          wx:for="{{allChapters}}" 
          wx:key="id"
          bindtap="jumpToChapter"
          data-chapter-id="{{item.id}}"
        >
          <view class="popup-item-number">ç¬¬{{item.id}}ç« </view>
          <view class="popup-item-title">{{item.title}}</view>
        </view>
      </scroll-view>
    </view>
  </view>
</view>